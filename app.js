!function t(i,e,o){function n(s,h){if(!e[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[s]={exports:{}};i[s][0].call(l.exports,function(t){var e=i[s][1][t];return n(e||t)},l,l.exports,t,i,e,o)}return e[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(t,i,e){"use strict";function o(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i,e,o){var n=t.halfWidth,r=t.halfHeight;return t.x-n-o<i&&t.x+n+o>i&&t.y-r-o<e&&t.y+r+o>e}function h(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;c(t,t.width*i,t.height*i)}function a(t){c(t,.75*t.width,.75*t.height)}function c(t,i,e){i>1e4||e>1e4||(t.width=i,t.height=e,t.halfWidth=i/2,t.halfHeight=e/2,t.screen.width=i,t.screen.height=e)}var l=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}();window.addEventListener("load",function(){function t(){var e=(new Date).getTime(),o=(y-e)/1e3;c.clearRect(0,0,i.width,i.height);for(var n=0;n<u.length;n++)u[n].tick(o,u,s);for(var r=0;r<u.length;r++)u[r].draw(c,s);y=e,requestAnimationFrame(t)}var i=document.getElementById("screen");i.addEventListener("wheel",function(t){t.deltaY>0?h(s):a(s)});var e=!1,o={x:0,y:0},n={x:0,y:0},r={location:{x:void 0,y:void 0},moved:!1};i.addEventListener("mousedown",function(t){e=!0,r.moved=!1,n.x=s.x,n.y=s.y,o.x=t.x,o.y=t.y,r.location.x=t.x,r.location.y=t.y}),i.addEventListener("mouseup",function(t){if(e=!1,r.moved=!1,r.location.x=t.x,r.location.y=t.y,!r.moved){console.log("new dispenser");var i=s.x-(t.x/t.target.clientWidth-.5)*s.width,o=s.y-(t.y/t.target.clientHeight-.5)*s.height;u.push(new v(5e3*Math.random(),i,o))}}),i.addEventListener("mousemove",function(t){r.moved=!0,r.location.x=t.x,r.location.y=t.y,e&&(s.x=n.x+o.x-t.x,s.y=n.y+o.y-t.y)}),document.addEventListener("keydown",function(t){var i=t.keyCode;return console.log(i),37===i||65===i?l.controls.left=!0:38===i||87===i?l.controls.up=!0:39===i||68===i?l.controls.right=!0:40===i||83===i?l.controls.down=!0:0===i&&(l.controls.launch=!0),!1}),document.addEventListener("keyup",function(t){var i=t.keyCode;return 37===i||65===i?l.controls.left=!1:38===i||87===i?l.controls.up=!1:39===i||68===i?l.controls.right=!1:40===i||83===i?l.controls.down=!1:0===i&&(l.controls.launch=!0),!1}),i.width=160,i.height=90;var s={x:0,y:0,width:i.width,height:i.height,halfWidth:i.width/2,halfHeight:i.height/2,screen:i},c=i.getContext("2d");c.imageSmoothingEnabled=!1,c.strokeStyle="#ffffff",c.fillStyle="#ffffff",c.lineWidth=1;var l=new f(1,0,-20),u=[l,new v(1e3,0,0)];u.player=l;var y=(new Date).getTime();t()});var u=function(){function t(i,e,o,n){r(this,t),this.size=i,this.position={x:e,y:o},this.color=n}return l(t,[{key:"draw",value:function(t,i){var e=this.position,o=e.x,n=e.y,r=this.radius,h=this.color;s(i,o,n,r)&&(t.fillStyle=h,t.beginPath(),t.arc(i.halfWidth+i.x-o,i.halfHeight+i.y-n,r,0,2*Math.PI),t.fill())}},{key:"size",set:function(t){this._size=t,this.radius=Math.sqrt(t)/4},get:function(){return this._size}}]),t}(),f=function(t){function i(t,e,n){r(this,i);var s=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n,"#33aa33"));return s.velocity={vx:0,vy:0},s.friction=.95,s.emissionRate=.025,s.controls={left:!1,right:!1,up:!1,down:!1},s}return n(i,u),l(i,[{key:"tick",value:function(t,i,e){this.controls.left&&(this.velocity.vx+=-1*Math.sqrt(this.radius)),this.controls.right&&(this.velocity.vx+=1*Math.sqrt(this.radius)),this.controls.up&&(this.velocity.vy+=-1*Math.sqrt(this.radius)),this.controls.down&&(this.velocity.vy+=1*Math.sqrt(this.radius)),this.controls.launch&&(this.controls.launch=!1),this.position.x+=this.velocity.vx*t,this.position.y+=this.velocity.vy*t,this.velocity.vx*=1- -this.friction*t,this.velocity.vy*=1- -this.friction*t;for(var o=i.length-1;o>=0;o--){var n=i[o];if(!(n===this||n instanceof v)){var r=n.position.x-this.position.x,s=n.position.y-this.position.y,h=Math.sqrt(r*r+s*s),a=this.radius+n.radius;if(h<a)i.splice(o,1),this.size+=n.size,this.maxViewScale=this.radius;else{var c=a/h;n.velocity.vx-=t*r*c,n.velocity.vy-=t*s*c}}}var l=this.position,u=l.x,f=l.y;this.color;if(Math.random()<this.emissionRate){var d=Math.sqrt(Math.max(.01*this.size,Math.random()*this.size));this.size-=d;var p=10*(Math.random()-.5),x=10*(Math.random()-.5);i.push(new y(d,u+(p<0?this.radius:-this.radius),f+(x<0?this.radius:-this.radius),this.velocity.vx+p,this.velocity.vy+x,"#00aa00")),this.velocity.vx+=t*p/(d/(d+this.size)),this.velocity.vx+=t*x/(d/(d+this.size))}e.x=this.position.x,e.y=this.position.y}}]),i}(),v=function(t){function i(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.random()/10;r(this,i);var h=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n,"rgba(255, 255, 255, "+s+")"));return h.emissionRate=s,h}return n(i,u),l(i,[{key:"tick",value:function(t,i){var e=this.position,o=e.x,n=e.y;this.color;if(Math.random()<this.emissionRate){var r=Math.sqrt(Math.random()*this.radius);this.size-=r;var s=5*(Math.random()-.5)/this.emissionRate,h=5*(Math.random()-.5)/this.emissionRate;if(i.push(new y(r,o+(s<0?this.radius:-this.radius),n+(h<0?this.radius:-this.radius),s,h,"#ffff00")),this.size<=0)for(var a=0;a<i.length;a++)if(i[a]===this){i.splice(a,1);break}}}}]),i}(),y=function(t){function i(t,e,n,s,h,a){r(this,i);var c=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n,a));return c.velocity={vx:s,vy:h},c.removeCount=100*t,c}return n(i,u),l(i,[{key:"tick",value:function(t,i){if(this.position.x+=this.velocity.vx*t,this.position.y+=this.velocity.vy*t,this.velocity.vx+=(Math.random()-.5)*t,this.velocity.vy+=(Math.random()-.5)*t,--this.removeCount<=0)for(var e=0;e<i.length;e++)if(i[e]===this){i.splice(e,1),i.player.size+=this.size;break}}}]),i}()},{}]},{},[1]);